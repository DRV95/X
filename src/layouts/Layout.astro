---
import Footer from "../components/elements/Footer.astro";
import Navbar from "../components/elements/Navbar.astro";

export interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<meta name="description" content="AsesorÃ­a experta en Ley de Quiebras 20.720. Eliminamos y renegociamos tus deudas bancarias y comerciales en todo Chile." />
		<title>Ley de quiebras 20.720 - {title}</title>
		<link
			href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;500;600;700&display=swap"
			rel="stylesheet"
		/>
	</head>
	<body class="overflow-hidden overflow-y-auto">
		<div class="fixed inset-0 bg-[url('/images/texture.svg')] bg-cover bg-center opacity-40 dark:opacity-15 z-0"></div>
		
		<div class="relative bg-body z-[1]">
			<Navbar />
			<slot />
			<Footer />
		</div>
		
		<a 
			class="fixed bottom-4 right-4 z-50 flex items-center bg-[#25D366] text-white p-3 rounded-full shadow-xl hover:bg-[#128C7E] transition duration-300" 
			href="https://api.whatsapp.com/send/?phone=%2B56927020275&text&type=phone_number&app_absent=0" 
			target="_blank" 
			rel="noopener" 
			aria-label="WhatsApp"
		>
			<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
				<path d="M20.52 3.48A11.78 11.78 0 0 0 12.05 0C5.43 0 .05 5.38.05 12a11.86 11.86 0 0 0 1.62 6l-1.67 6 6.21-1.63a11.9 11.9 0 0 0 5.84 1.54h.01c6.62 0 12-5.38 12-12a11.94 11.94 0 0 0-3.54-8.43zM12.06 21.2h-.01a9.2 9.2 0 0 1-4.7-1.29l-.34-.2-3.68.96.98-3.58-.22-.37A9.2 9.2 0 1 1 12.06 21.2zm5.22-6.86c-.28-.14-1.62-.8-1.87-.89-.25-.09-.43-.14-.62.14-.18.28-.72.89-.88 1.07-.16.18-.33.2-.61.07-.28-.14-1.18-.43-2.25-1.37-.83-.73-1.39-1.64-1.55-1.92-.16-.28-.02-.43.12-.57.12-.12.28-.33.41-.5.14-.16.18-.28.28-.47.09-.18.05-.34-.02-.48-.07-.14-.62-1.49-.86-2.04-.23-.55-.46-.48-.62-.49-.16-.01-.34-.01-.52-.01s-.48.07-.73.34c-.25.28-.96.94-.96 2.3 0 1.36.99 2.67 1.12 2.85.14.18 1.95 2.98 4.72 4.16.66.29 1.17.46 1.57.59.66.21 1.26.18 1.74.11.53-.08 1.62-.66 1.85-1.3.23-.64.23-1.19.16-1.3-.07-.11-.25-.18-.53-.32z"/>
			</svg>
		</a>
	</body>
	<script>
		const switchTheme = document.querySelector(
			"[data-switch-theme]"
		) as HTMLButtonElement;

		if (
			localStorage.getItem("appTheme") === "dark" ||
			(!("appTheme" in localStorage) &&
				window.matchMedia("(prefers-color-scheme: dark)").matches)
		) {
			document.documentElement.classList.add("dark");
		} else {
			document.documentElement.classList.remove("dark");
		}
		if (switchTheme) {
			switchTheme.addEventListener("click", (e) => {
				e.preventDefault();
				const doc = document.documentElement;
				if (doc) {
					if (localStorage.getItem("appTheme")) {
						if (localStorage.getItem("appTheme") === "light") {
							doc.classList.add("dark");
							localStorage.setItem("appTheme", "dark");
						} else {
							document.documentElement.classList.remove("dark");
							localStorage.setItem("appTheme", "light");
						}
					} else {
						if (doc.classList.contains("dark")) {
							doc.classList.remove("dark");
							localStorage.setItem("appTheme", "light");
						} else {
							doc.classList.add("dark");
							localStorage.setItem("appTheme", "dark");
						}
					}
				}
			});
		}
	</script>
	<script>
		const toggleMenu = document.querySelector(
			"[data-toggle-nav]"
		) as HTMLButtonElement;
		const navbar = document.querySelector("[data-navbar]") as HTMLDivElement;
		const overlayNav = document.querySelector(
			"[data-nav-overlay]"
		) as HTMLDivElement;
		if (toggleMenu) {
			toggleMenu.addEventListener("click", e => {
				e.preventDefault();
				if (toggleMenu.getAttribute("data-open-nav") === "false") {
					toggleMenu.setAttribute("data-open-nav", "true");
					overlayNav.setAttribute("data-is-visible", "true");
					document.body.classList.add("!overflow-y-hidden");
					navbar.style.height = `${navbar.scrollHeight}px`

				}else{
					toggleMenu.setAttribute("data-open-nav", "false");
					overlayNav.setAttribute("data-is-visible", "false");
					document.body.classList.remove("!overflow-y-hidden");
					navbar.style.height = "0px"
				}
				
				
			});

			navbar.addEventListener("click", () => {
				toggleMenu.setAttribute("data-open-nav", "false");
				overlayNav.setAttribute("data-is-visible", "false");
				document.body.classList.remove("!overflow-y-hidden");
				navbar.style.height = "0px"
			});

			overlayNav.addEventListener("click", () => {
				toggleMenu.setAttribute("data-open-nav", "false");
					overlayNav.setAttribute("data-is-visible", "false");
					document.body.classList.remove("!overflow-y-hidden");
					navbar.style.height = "0px"
			});
		}
	</script>
</html>
<style is:global>
	:root {
		--color-bg: 250 250 250 ;
		--color-border: 245 245 245;
		--color-box: 255 255 255;
		--box-border: 220 220 220/ 0.1;
		--box-sd: transparent;
	--heading-1: 	23 37 84;
	--heading-2: 31 41 55;
	--heading-3: 55 65 81;
	}

	.dark {
		--color-bg: 18 18 18;
		--color-box: 30 30 30;
		--box-border: 243 244 246/0.1;
		--box-sd: transparent;

	
	--heading-1: 	255 255 255;
	--heading-2: 	243 244 246;
	--heading-3: 	209 213 219;
	}

	html{
		scroll-behavior: smooth;
	}
	body {
		font-family: "Raleway", sans-serif;
	}

	[data-toggle-nav][data-open-nav="true"] #line1 {
		transform: translateY(0.375rem) rotate(40deg);
	}
	[data-toggle-nav][data-open-nav="true"] #line2 {
		transform: scaleX(0);
		opacity: 0;
	}
	[data-toggle-nav][data-open-nav="true"] #line3 {
		transform: translateY(-0.375rem) rotate(-40deg);
	}

	
	[data-nav-overlay][data-is-visible="true"] {
		visibility: visible;
		display: flex;
	}
</style>